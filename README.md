# Next.js アンチパターン学習プロジェクト

Next.jsのデータフェッチにおけるアンチパターンを実際のコードで体験し、ベストプラクティスを学ぶための教材です。

## 🎯 プロジェクトの目的

Next.js App Routerの強力な機能を最大限活用するため、よくある実装の間違い（アンチパターン）を実際に動作するコードで確認し、正しい実装方法を学びます。

## 📚 学習内容

### パターン #01: クライアントサイドでの不要なデータフェッチ
- **アンチパターン**: Server Componentsが使える場面でClient Components + useEffectを使用
- **ソリューション**: Server Components + Suspenseによるサーバーサイドフェッチ
- **学習ポイント**: SEO改善、初期表示速度の向上、コードの簡潔化

### パターン #02: データフェッチの集中化（コロケーション不足）
- **アンチパターン**: 親コンポーネントで全データを取得してprops drilling
- **ソリューション**: 各コンポーネントで必要なデータを個別に取得（データコロケーション）
- **学習ポイント**: コンポーネントの独立性、再利用性の向上、並列フェッチ

### パターン #03: ユーザー操作での不適切なデータフェッチ
- **アンチパターン**: Client Component + useEffectでの検索機能実装
- **ソリューション**: Server Actions + useActionStateによる実装
- **学習ポイント**: シンプルな状態管理、プログレッシブエンハンスメント、型安全性

### パターン #04: Server Actionsでの例外ベースエラーハンドリング
- **アンチパターン**: 予測可能なエラーも例外でthrow
- **ソリューション**: 戻り値でエラーを表現
- **学習ポイント**: 型安全なエラー処理、Error Boundary不要、一貫したUX

## 🚀 セットアップ

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

http://localhost:3000 でアプリケーションにアクセスできます。

## 📖 使い方

1. **ホームページ**から学習したいパターンを選択
2. **アンチパターンページ**で問題のある実装を確認
   - 左側: 実際に動作するコード
   - 右側: 注目ポイントと問題点の説明
3. **改善版を見る**ボタンでソリューションページへ
4. **ソリューションページ**でベストプラクティスの実装を確認

## 🛠 技術スタック

- **Next.js 14+** (App Router)
- **TypeScript**
- **Tailwind CSS**
- **Biome** (Linter & Formatter)

## 📝 スクリプト

```bash
npm run dev      # 開発サーバー起動
npm run build    # プロダクションビルド
npm run start    # プロダクションサーバー起動
npm run lint     # Lintチェック
npm run format   # コードフォーマット
```

## 🔗 参考資料

このプロジェクトは以下の資料を参考に作成されています：

- [Next.jsの考え方](https://zenn.dev/akfm/books/nextjs-basic-principle) by @akfm

## ⚖️ トレードオフについて

各ソリューションは多くの場面でベストプラクティスですが、万能ではありません。プロジェクトの要件に応じて適切な手法を選択することが重要です。

- **Server Components**: SEOが重要で静的コンテンツが多い場合
- **Client Components**: リアルタイム更新や複雑なインタラクションが必要な場合
- **Server Actions**: フォーム送信やデータ変更操作がメインの場合
- **データコロケーション**: コンポーネントの独立性と再利用性を重視する場合

## 📄 ライセンス

MIT

---

© 2025 Next.js アンチパターン学習 フロントエンドチーム